# –ú—É–ª—å—Ç–∏–ª–∏–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ç—É—Ä—ã —Å–µ–∑–æ–Ω–∞ #0009

**–î–∞—Ç–∞:** 04 Oct 2025  
**–¢–∏–ø:** Database & Backend Enhancement  
**–í–ª–∏—è–Ω–∏–µ:** üî¥ Tech Stability / üîµ Engagement

## –î–û
- –ö–∞—Ä—å–µ—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `player_club_career_stats` —Ö—Ä–∞–Ω–∏–ª–∞ —Ç–æ–ª—å–∫–æ –≥–æ–ª—ã –∏ –º–∞—Ç—á–∏, –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤—Ä—É—á–Ω—É—é.
- –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ —Å–µ–∑–æ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –Ω–µ –∞–≥—Ä–µ–≥–∏—Ä—É—è –∫–∞—Ä—å–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—è –∞—Å—Å–∏—Å—Ç—ã/–∫–∞—Ä—Ç–æ—á–∫–∏.
- –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –∞–¥–º–∏–Ω–∫–µ –≤—ã–≤–æ–¥–∏–ª–∞—Å—å –æ–¥–Ω–∏–º —Å–ø–∏—Å–∫–æ–º –±–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ –ª–∏–≥–∞–º, —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—é –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª.
- –í –ë–î –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç—É—Ä–æ–≤/—Å—Ç–∞–¥–∏–π; –º–∞—Ç—á–∏ –Ω–µ –∑–Ω–∞–ª–∏, –∫ –∫–∞–∫–æ–º—É —Ç—É—Ä—É –æ—Ç–Ω–æ—Å—è—Ç—Å—è, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ –≤–∏–¥–∞ "1 —Ç—É—Ä" –∏–ª–∏ "1/4 —Ñ–∏–Ω–∞–ª–∞".

## –ü–û–°–õ–ï
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `season_round` –∏ –æ–∫—Ä—É–≥ `round_id` –≤ `match`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—É—Ä–æ–≤ —Ä–µ–≥—É–ª—è—Ä–∫–∏ –∏ —Å—Ç–∞–¥–∏–π –ø–ª–µ–π-–æ—Ñ—Ñ –≤ `seasonAutomation`.
- `Player_Season_Stats` —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –ø–æ–ª—è–º–∏ `red_cards`, `matches_played`; `Player_Club_Career_Stats` ‚Äî –ø–æ–ª—è–º–∏ `total_assists`, `yellow_cards`, `red_cards`.
- `matchAggregation.handleMatchFinalization` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–ª—É–±–Ω—ã–µ –∫–∞—Ä—å–µ—Ä–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ `club_player`, –∫—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∏ –ø–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º.
- CRUD –∏–≥—Ä–æ–∫–æ–≤ –∫–ª—É–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç/–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ä—å–µ—Ä—ã, –∏–º–ø–æ—Ä—Ç –∏–≥—Ä–æ–∫–æ–≤ —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/stats/*` –ø—Ä–∏–Ω–∏–º–∞—é—Ç `competitionId`, —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–∏–≥–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–ª—è.
- –í–∫–ª–∞–¥–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" –∞–¥–º–∏–Ω–∫–∏ –ø–æ–ª—É—á–∏–ª–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç—É—Ä–Ω–∏—Ä–æ–≤, –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ (–∞—Å—Å–∏—Å—Ç—ã, –º–∞—Ç—á–∏, –ñ–ö/–ö–ö), —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `docs/BD.md` –∏ `audit/mcp-context7-summary.md` –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π.

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `prisma/schema.prisma` ‚Äî –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `season_round`, –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Ö, —Å–≤—è–∑—å –º–∞—Ç—á–∞ —Å —Ç—É—Ä–æ–º.
- `backend/src/services/matchAggregation.ts` ‚Äî –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç —Å–µ–∑–æ–Ω–Ω—ã—Ö/–∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π, —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ lineups, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥—Ü–∏—è –∫—ç—à–∞.
- `backend/src/services/seasonAutomation.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—É—Ä–æ–≤ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞ –∏ —Å—Ç–∞–¥–∏–π –ø–ª–µ–π-–æ—Ñ—Ñ, –ø—Ä–∏–≤—è–∑–∫–∞ –º–∞—Ç—á–µ–π –∫ —Ç—É—Ä–æ–≤—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º.
- `backend/src/routes/adminRoutes.ts` ‚Äî –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∫–∞—Ä—å–µ—Ä—ã, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã `/stats/*`, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `roundId` –≤ CRUD –º–∞—Ç—á–µ–π.
- `admin/src/store/adminStore.ts` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞, –∑–∞–ø—Ä–æ—Å—ã —Å `competitionId`.
- `admin/src/components/tabs/StatsTab.tsx` ‚Äî UI –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–∏–≥, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
- `admin/src/types.ts` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–∞—Ç—á–∞.
- `docs/BD.md`, `audit/mcp-context7-summary.md` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å—Ö–µ–º–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏
- **Tech Stability:** üî¥ ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —Ä—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–Ω–∏–∂–µ–Ω—ã —Ä–∏—Å–∫–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
- **Engagement:** üîµ ‚Äî –∞–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ª–∏–≥–∞–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–∞—Å—Å–∏—Å—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏), —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- **Revenue:** ‚ö™ ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ.
- **Retention:** üîµ ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∫–ª—É–±–æ–≤.

## –ü—Ä–æ–≤–µ—Ä–∫–∏
```bash
cd backend && npm run build   # ‚úÖ prisma generate + tsc
cd admin && npm run build     # ‚úÖ vite build
```

## –†–∏—Å–∫–∏ –∏ mitigation
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:** —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã (`season_round`, –Ω–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã); –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º.
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ä—ã–µ –º–∞—Ç—á–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å `round_id = NULL`; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ç—É—Ä—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é.
- **–ö—ç—à Redis:** –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ `competition:*`; –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–¥–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pub/sub –æ—á–∏—â–∞–µ—Ç –∏—Ö –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–µ–∑–æ–Ω–Ω—ã–º –∫–ª—é—á–∞–º.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
- –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ MCP Context7 —Å–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç–∞ –∫–∞—Ä—å–µ—Ä—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç—É—Ä–æ–≤, —Å–Ω—è—Ç—å –ø–æ–º–µ—Ç–∫–∏ –æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Ç—É—Ä–æ–≤/—Å—Ç–∞–¥–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ (WebApp) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ `round` –ø–æ–ª—è.
