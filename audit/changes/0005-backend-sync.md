# Backend –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è #0005

**–î–∞—Ç–∞:** 28 Dec 2024  
**–¢–∏–ø:** Backend API —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  
**–í–ª–∏—è–Ω–∏–µ:** üî¥ Tech Stability  

## –î–û
- Backend –∏–º–µ–ª –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript –∏–∑-–∑–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π Prisma-—Å—Ö–µ–º—ã
- adminRoutes.ts –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `Prisma.EnumType`
- matchAggregation.ts –∏–º–µ–ª –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è series —Å –º–∞—Ç—á–∞–º–∏
- Prisma —Å—Ö–µ–º–∞ –∏–º–µ–ª–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–≤—è–∑–∏

## –ü–û–°–õ–ï
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ relation fields –≤ Prisma —Å—Ö–µ–º–µ (refereedMatches, lineups, eventTeams)
- –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `Prisma.EnumType` –Ω–∞ –ø—Ä—è–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã enum'–æ–≤ –≤ adminRoutes.ts
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ match –≤ matchAggregation.ts –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `series: { include: { matches: true } }`
- Backend —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000
- Admin –ø–∞–Ω–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5183 –∏ –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å API

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
1. `prisma/schema.prisma` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ relation fields
2. `backend/src/routes/adminRoutes.ts` - –∑–∞–º–µ–Ω–µ–Ω—ã enum –∏–º–ø–æ—Ä—Ç—ã (CompetitionType, SeriesFormat, LineupRole, MatchEventType)
3. `backend/src/services/matchAggregation.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω include –¥–ª—è series —Å matches

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏
- **Retention:** ‚ö™ - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ, –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω–∫–∏
- **Engagement:** ‚ö™ - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Revenue:** ‚ö™ - –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ
- **Tech Stability:** üî¥ - –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ, —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∏
```bash
cd backend && npm run build  # ‚úÖ —É—Å–ø–µ—à–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è
cd backend && npm start      # ‚úÖ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :3000
cd admin && npm run dev      # ‚úÖ –∞–¥–º–∏–Ω–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ :5183
```

## –†–∏—Å–∫–∏ –∏ mitigation
- **–†–∏—Å–∫:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Redis –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Mitigation:** –ö—ç—à gracefully degraded, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–†–∏—Å–∫:** –ù–æ–≤—ã–µ enum –∏–º–ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **Mitigation:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ @prisma/client —Ç–∏–ø—ã