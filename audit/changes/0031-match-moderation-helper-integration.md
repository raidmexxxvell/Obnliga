# 0031 — Централизация утилит модерации матчей

## Контекст
Новое требование по вводу роли судьи потребовало аккуратного переиспользования существующей логики перерасчёта статистики, уведомлений и кэшей. В рамках подготовки к реализации мы выделили общий модуль `backend/src/routes/matchModerationHelpers.ts`.

## Что сделано
- Удалены дублирующиеся определения `eventStatisticAdjustments`, `applyStatisticDelta`, `applyStatisticAdjustments`, `getMatchStatisticsWithMeta`, `broadcastMatchStatistics` и связанных типов из `backend/src/routes/adminRoutes.ts`; теперь используется общий модуль.
- Обновлён импорт в `backend/src/routes/adminRoutes.ts`, чтобы опираться на единый источник истины.
- Зафиксирован прогресс для дальнейшей интеграции судейского интерфейса без нарушения кэширования и WS-протокола.

## Риски
- Требуется убедиться, что фронтенд и административный портал после рефакторинга корректно обрабатывают событие обновления статистики. Планируется провести smoke-тесты после реализации судейской панели.

## Последующие шаги
1. Реализовать аутентификацию судьи и защищённые эндпоинты с использованием общих утилит.
2. Провести нагрузочный тест кэшей после объединения потоков админа и судьи.
3. Актуализировать документы `docs/state.md` и `docs/project.md` после добавления нового стора для судьи.
