# 0023-admin-news-tab

Дата: 09 октября 2025 г.
Ответственный: GitHub Copilot

## Что было
- Вкладка «Новости» в админке использовалась для управления пользователями и не имела формы публикации.
- После релиза backend API `POST /api/admin/news` отсутствовал интерфейс для ввода заголовка, текста и опций Telegram.
- Состояние новостей не синхронизировалось локально — для проверки требовался ручной запрос к публичному API.

## Что стало
### 1. Отдельная вкладка «Новости»
- `admin/src/store/adminStore.ts`
  - Добавлены состояния `news` и `newsVersion`, методы `fetchNews` и `prependNews` с интеграцией в `refreshTab`.
  - Перераспределены вкладки: `news` отвечает за новости, добавлена новая вкладка `users` для прежней активности.
- `admin/src/components/DashboardLayout.tsx`
  - Подключён новый компонент `NewsTab`, меню вкладок расширено пунктом «Пользователи и активность».

### 2. Форма публикации без перезапросов
- `admin/src/components/tabs/NewsTab.tsx`
  - Реализована форма с полями «заголовок», «контент», «изображение» и чекбоксом «Отправить в Telegram бота».
  - После сохранения используется локальный `prependNews`, что моментально обновляет список без повторного fetch.
  - Успешная публикация отражается дебаг-уведомлением с ID и статусом Telegram-задачи.

### 3. UI-улучшения и стили
- `admin/src/app.css`
  - Добавлены стили для заголовка вкладки, бейджа версии, формы и превью-списка новостей.
  - Расширены утилитарные классы (`checkbox-inline`, `feedback-meta`, чипы статусов, ссылки на обложку).

## Тестирование
- `npm run build` в `admin/` — TypeScript + Vite сборка (успешно).

## Следующие шаги
1. Подключить предпросмотр изображения (рендер миниатюры по URL).
2. Добавить фильтры и поиск по новостям в админке.
3. Настроить e2e сценарий (Playwright) для проверки публикации и обновления ленты.
