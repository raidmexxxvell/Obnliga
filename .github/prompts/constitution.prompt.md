description: Создание или обновление конституции проекта на основе интерактивного ввода или предоставленных принципов с обеспечением синхронизации всех зависимых шаблонов.
Пользовательский ввод может быть предоставлен напрямую агентом или как аргумент команды - вы ОБЯЗАНЫ учесть его перед продолжением (если не пустой).
Пользовательский ввод:
$ARGUMENTS
Вы обновляете конституцию проекта по пути `.specify/memory/constitution.md`. Этот файл является ШАБЛОНОМ, содержащим заполнители в квадратных скобках (например, `[PROJECT_NAME]`, `[PRINCIPLE_1_NAME]`). Ваша задача: (a) собрать/определить конкретные значения, (b) точно заполнить шаблон и (c) распространить любые изменения на зависимые артефакты.
Следуйте этому порядку выполнения:
Загрузите существующий шаблон конституции по пути `.specify/memory/constitution.md`.
Определите все заполнители вида `[ВСЕ_ЗАГЛАВНЫЕ_БУКВЫ]`.
ВАЖНО: Пользователь может потребовать меньше или больше принципов, чем используется в шаблоне. Если указано количество, соблюдайте его - следуйте общему шаблону. Вы соответствующим образом обновите документ.
Сбор/определение значений для заполнителей:
- Если пользовательский ввод (диалог) предоставляет значение, используйте его.
- В противном случае определите из контекста репозитория (README, документация, предыдущие версии конституции, если они встроены).
- Для дат управления: `RATIFICATION_DATE` - это исходная дата принятия (если неизвестна, запросите или пометьте как TODO), `LAST_AMENDED_DATE` - сегодняшняя дата при внесении изменений, иначе сохраните предыдущую.
- `CONSTITUTION_VERSION` должен увеличиваться в соответствии с правилами семантического версионирования:
  * MAJOR: Назад несовместимые изменения в управлении/удалении принципов или их переопределении.
  * MINOR: Добавление нового принципа/раздела или существенное расширение руководства.
  * PATCH: Уточнения, исправление формулировок, опечаток, некритичные доработки.
- Если тип увеличения версии неоднозначен, предложите обоснование перед финализацией.

Подготовьте обновленное содержимое конституции:
- Замените каждый заполнитель конкретным текстом (никаких токенов в скобках не оставляйте, кроме тех, которые проект намеренно не определил - явно обоснуйте любые оставленные).
- Сохраните иерархию заголовков, комментарии могут быть удалены после замены, если они больше не добавляют поясняющего руководства.
- Убедитесь, что каждый раздел Принципа содержит: краткое название, абзац (или маркированный список), отражающий непреложные правила, явное обоснование, если оно не очевидно.
- Убедитесь, что раздел Управление содержит процедуру внесения поправок, политику версионирования и ожидания по проверке соблюдения.

Чек-лист согласованности (преобразуйте предыдущий чек-лист в активные проверки):
- Прочитайте `.specify/templates/plan-template.md` и убедитесь, что любые "Проверки конституции" или правила соответствуют обновленным принципам.
- Прочитайте `.specify/templates/spec-template.md` для согласования с областью/требованиями - обновите, если конституция добавляет/удаляет обязательные разделы или ограничения.
- Прочитайте `.specify/templates/tasks-template.md` и убедитесь, что категоризация задач отражает новые или удаленные типы задач, обусловленные принципами (например, наблюдаемость, версионирование).
- Прочитайте каждый файл команды в `.specify/templates/commands/*.md` (включая этот), чтобы проверить отсутствие устаревших ссылок (имена агентов, такие как CLAUDE, только если требуется общее руководство).
- Прочитайте любые документы руководства во время выполнения (например, `README.md`, `docs/quickstart.md` или руководства для конкретных агентов, если они присутствуют). Обновите ссылки на измененные принципы.

Подготовьте Отчет о влиянии синхронизации (добавьте в начало файла конституции как HTML-комментарий после обновления):
- Изменение версии: старая → новая
- Список измененных принципов (старое название → новое название, если переименованы)
- Добавленные разделы
- Удаленные разделы
- Шаблоны, требующие обновления (✅ обновлено / ⚠ ожидание) с путями файлов
- Последующие TODO, если какие-либо заполнители намеренно отложены

Проверка перед финальным выводом:
- Нет оставшихся необъясненных токенов в скобках.
- Строка версии соответствует отчету.
- Даты в формате ISO YYYY-MM-DD.
- Принципы являются декларативными, измеримыми и свободными от расплывчатого языка ("should" → замените на MUST/SHOULD с обоснованием, где это уместно).

Запишите завершенную конституцию обратно в `.specify/memory/constitution.md` (перезапишите).

Выведите финальную сводку пользователю с:
- Новой версией и обоснованием увеличения.
- Любыми файлами, помеченными для ручного последующего действия.
- Предлагаемым сообщением коммита (например, `docs: обновление конституции до vX.Y.Z (добавление принципов + обновление управления)`).

Требования к форматированию и стилю:
- Используйте заголовки Markdown точно как в шаблоне (не понижайте/повышайте уровни).
- Переносите длинные строки обоснования для улучшения читаемости (<100 символов предпочтительно), но не применяйте жесткие переносы с неудобными разрывами.
- Сохраняйте одну пустую строку между разделами.
- Избегайте конечных пробелов.
- Если пользователь предоставляет частичные обновления (например, только пересмотр одного принципа), все равно выполните шаги проверки и принятия решения по версии.
- Если критическая информация отсутствует (например, дата ратификации действительно неизвестна), вставьте `TODO(<ИМЯ_ПОЛЯ>): объяснение` и включите в Отчет о влиянии синхронизации в раздел отложенных элементов.
- Не создавайте новый шаблон; всегда работайте с существующим файлом `.specify/memory/constitution.md`.