##  –¶–µ–ª—å: –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram WebApp —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Ñ—É—Ç–±–æ–ª—å–Ω–æ–π –ª–∏–≥–∏ –≥.–û–±–Ω–∏–Ω—Å–∫ —Å live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ù–∞ —Å—Ç–µ–∫–µ: Node.js+TS+Prisma+Fastify+Redis+BullMQ (–±–µ–∫–µ–Ω–¥) –∏ Vite+React/Preact+TS+single-store (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥). –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–¥–µ–∏: multilevel cache, ETag/SWR, patch-based WS, admin-logger. 

–ü–ª–∞–Ω —Ä–∞–∑–±–∏—Ç –Ω–∞ —Ñ–∞–∑—ã; –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ —É–∫–∞–∑–∞–Ω—ã: —á–µ–∫–±–æ–∫—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –°—Ç–∞—Ç—É—Å (‚úÖ/üü®/‚¨ú) –∏ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–ª–∏—è–Ω–∏—è (üî¥/üîµ/‚ö™).

##  –õ–µ–≥–µ–Ω–¥–∞:

–°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, üü® ‚Äî –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, ‚¨ú ‚Äî –Ω–µ –Ω–∞—á–∞—Ç–æ
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ ‚Äî –≤—ã—Å–æ–∫–∏–π, üîµ ‚Äî —Å—Ä–µ–¥–Ω–∏–π, ‚ö™ ‚Äî –Ω–∏–∑–∫–∏–π

##  –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2025-10-05)
- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ WebSocket-—Ç–æ–ø–∏–∫–∏ (–ø–æ –≤–∏–¥–∞–º –¥–∞–Ω–Ω—ã—Ö). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ ‚Äî –î–æ–∫—É–º–µ–Ω—Ç: `specs/001-project-analysis/public-aggregates-plan.md`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–æ—Ä–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –∞–¥–º–∏–Ω—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç Redis. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ ‚Äî –ü–ª–∞–Ω: in-process BullMQ worker (`stats-aggregation`) –≤–Ω—É—Ç—Ä–∏ Fastify –≤–º–µ—Å—Ç–æ –ø–ª–∞—Ç–Ω–æ–≥–æ Render background worker.
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `stats.updated`. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ ‚Äî –º–∞—Ç—á-—Ä–µ–¥–∞–∫—Ç–æ—Ä —É–∂–µ –ø—É–±–ª–∏–∫—É–µ—Ç `match:{id}:stats`, –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏.

##  –§–∞–∑–∞ 0 ‚Äî –°–∫–µ–ª–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞ (–≤–µ—Ç–∫–∞ skeleton/init)
–¶–µ–ª—å: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π skeleton —Ä–µ–ø–æ + CI, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ dev (–±–µ–∑ docker-compose).
 –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É skeleton/init. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 backend/: Fastify bootstrap (TS), package.json, tsconfig.json, src/server.ts —Å /health. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: –¥–æ–±–∞–≤–ª–µ–Ω `/health`, –¥–µ–º–æ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∫—ç—à–∞, root route –∏ dotenv –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 frontend/: Vite + React/Preact skeleton, package.json, tsconfig.json, src/main.tsx. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 shared/: types.ts (—á–µ—Ä–Ω–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 .github/workflows/ci.yml ‚Äî –±–∞–∑–æ–≤—ã–π CI (lint/test/build). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 docs/dev-setup.md ‚Äî –∫–æ–º–∞–Ω–¥—ã dev (–ª–æ–∫–∞–ª—å–Ω–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –∏–ª–∏ —Å Render DB). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance / –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ
 - cd backend && npm install && npm run dev ‚Üí —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç /health (PASS).
 - cd frontend && npm install && npm run dev ‚Üí Vite dev server –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (PASS).

##  –§–∞–∑–∞ 1 ‚Äî Prisma + —Å—Ö–µ–º–∞ –ë–î (–≤–µ—Ç–∫–∞ backend/prisma)
–¶–µ–ª—å: –º–æ–¥–µ–ª–∏ DB –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ Prisma ‚Üí shared types.
 –î–æ–±–∞–≤–∏—Ç—å prisma/schema.prisma (User, Team, Player, Match, ShopItem, Cart, Bet, AdminActionLog). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: —Å—Ö–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –Ω–∞ `provider = "postgresql"` –¥–ª—è Render. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: –ª–æ–∫–∞–ª—å–Ω–æ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ sqlite –º–∏–≥—Ä–∞—Ü–∏—è (dev) ‚Äî –æ–Ω–∞ —É–¥–∞–ª—è–µ—Ç—Å—è/–ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ Postgres –¥–ª—è production. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ / —Ç–µ—Å—Ç–æ–≤). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
  - Sub: –¥–æ–±–∞–≤–ª–µ–Ω `render.yaml` –∏ job `run-migrations` + –æ–±–Ω–æ–≤–ª—ë–Ω `backend/package.json` —Å —è–≤–Ω—ã–º–∏ prisma —Å–∫—Ä–∏–ø—Ç–∞–º–∏. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Prisma Client –≤ backend/src/db/index.ts –∏ —ç–∫—Å–ø–æ—Ä—Ç —Ç–∏–ø–æ–≤. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ TS-—Ç–∏–ø—ã –≤ shared/types.ts (DB ‚Üí API ‚Üí frontend). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 Backend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å adminRoutes –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –û—á–∏—Å—Ç–∫–∞ –ë–î: —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü (AdminLog) –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (User ‚Üí AppUser). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Profile –∏ WebSocket –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã User ‚Üí AppUser. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è photoUrl –≤ AppUser –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥

Acceptance
 - Prisma Client —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ –±–∏–ª–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç). ‚úÖ
 - Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript ‚úÖ
 - Admin routes —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π ‚úÖ
 - –°—Ö–µ–º–∞ –ë–î –æ—á–∏—â–µ–Ω–∞ –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü ‚úÖ
 - –£–±—Ä–∞–Ω—ã –æ–±—Ö–æ–¥—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ (prisma as any) ‚úÖ
 - Profile –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è –∏ —Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
 - WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ
 - –¢—Ä–µ–±—É–µ—Ç—Å—è: –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–¥ Postgres –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `prisma migrate deploy` –Ω–∞ Render (job –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω).

##  –§–∞–∑–∞ 2 ‚Äî Core API (Fastify) + –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–≤–µ—Ç–∫–∞ backend/core-api)
–¶–µ–ª—å: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ HTTP endpoint‚Äô—ã —Å ETag –∏ —Å—Ö–µ–º–∞–º–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è).
 Fastify bootstrap —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏ (health, cors, helmet). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: health endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω; CORS/helmet –±–∞–∑–æ–≤–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ (üü®). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 Endpoints –∏ —Å—Ö–µ–º—ã: GET /api/matches, GET /api/matches/:id, POST /api/admin/matches/:id/score, GET /api/shop/items, POST /api/shop/cart, POST /api/auth/telegram-init. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: –¥–µ–º–æ –∫—ç—à‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/cache/:key` –∏ invalidate —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
  - Sub: auth/telegram-init –µ—â—ë –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–æ–∂–∏–¥–∞–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é initData flow). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 ETag middleware: –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ ETag, –æ–±—Ä–∞–±–æ—Ç–∫–∞ If-None-Match. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –°–æ–∑–¥–∞—Ç—å ./docs/api-contracts.md –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å shared/types.ts. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance
 - `/health` ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç.
 - `/api/cache/:key` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è multilevel cache –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.
 - –¢—Ä–µ–±—É–µ—Ç—Å—è: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è core endpoints –∏ ETag middleware.

##  –§–∞–∑–∞ 3 ‚Äî Multilevel cache + smart invalidation (–≤–µ—Ç–∫–∞ backend/cache)
–¶–µ–ª—å: in-process LRU + Redis layer + invalidation/publish.
 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å multilevelCache (API: get(key, loader), set, invalidate). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
  - Sub: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω LRU + Redis pub/sub skeleton –∏ –¥–µ–º–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (`/api/cache/*`). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Redis (–∏—Å–ø–æ–ª—å–∑—É—è Render Redis URL) –∏ in-memory LRU (quick-lru). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 smartInvalidator: –ø—Ä–∏ DB-write –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è + publish –≤ Redis channel. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –¢–µ—Å—Ç—ã –¥–ª—è cache API. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance
 - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è cache API —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ; –Ω—É–∂–µ–Ω Redis –≤ prod –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ smart invalidation –≤ –º–µ—Å—Ç–∞—Ö –∑–∞–ø–∏—Å–∏ –≤ –ë–î.

##  –§–∞–∑–∞ 4 ‚Äî Realtime: patch-based WebSocket (–≤–µ—Ç–∫–∏ backend/realtime, frontend/realtime)
–¶–µ–ª—å: —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π patch-based WS —Å Redis pub/sub (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å).
 –°–µ—Ä–≤–µ—Ä: Fastify WebSocket –∏–ª–∏ native ws + –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Redis pub/sub. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –°–æ–æ–±—â–µ–Ω–∏—è: { protocolVersion, type: 'patch'|'full', topic, payload }. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ö–ª–∏–µ–Ω—Ç: typed WS client —Å reconnect/backoff, subscribe/unsubscribe, applyPatch ‚Üí store. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ú–µ—Ö–∞–Ω–∏–∑–º versioning –∏ backward compatibility (v1/v2). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance
 - –û—Å—Ç–∞–≤–ª–µ–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è core API –∏ cache invalidation.

##  –§–∞–∑–∞ 5 ‚Äî –§—Ä–æ–Ω—Ç–µ–Ω–¥ core (–≤–µ—Ç–∫–∞ frontend/core)
–¶–µ–ª—å: SPA –¥–ª—è Telegram WebApp —Å typed store fa√ßade (Zustand/adapter).
 storeFacade (Zustand) + –º–æ–¥—É–ª–∏: matchesStore, userStore, shopStore, realtimeStore. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—É–±–ª–∏—á–Ω—ã–π `appStore` –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ ¬´–õ–∏–≥–∞¬ª, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤ —Ä–∞–±–æ—Ç–µ)
 api/etag.ts ‚Äî fetch wrapper —Å If-None-Match + SWR-like revalidate. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WS –∫–ª–∏–µ–Ω—Ça ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è store. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 Telegram WebApp integration: initData verification endpoint flow (server + client). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–∞–º–∏: –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –º–æ–±–∏–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π UX –º–µ–∂–¥—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é –∏ –∫–∞–ø–∏—Ç–∞–Ω—Å–∫–∏–º –ø–æ—Ä—Ç–∞–ª–æ–º. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
    –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–µ–π-–æ—Ñ—Ñ —Å–µ—Ç–∫–∏ –∏ –≤—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ `PLAYOFF_BRACKET` (–∞–¥–º–∏–Ω–∫–∞ + –ø–æ—Ä—Ç–∞–ª). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ (backend `/api/bracket` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–π stub, –ø–æ—Ä—Ç–∞–ª –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω)

Acceptance
 - Frontend skeleton –∏ splash —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebApp/ETag/WS ‚Äî —Å–ª–µ–¥—É—é—â–∞—è –∫—Ä—É–ø–Ω–∞—è –∑–∞–¥–∞—á–∞.
 - ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–∞–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.

##  –§–∞–∑–∞ 6 ‚Äî Shop / Cart / Bets + –æ—á–µ—Ä–µ–¥–∏ (–≤–µ—Ç–∫–∞ features/shop-bets)
–¶–µ–ª—å: shop, cart persistence, place bet ‚Üí BullMQ jobs ‚Üí settle.
 Endpoints: shop items, cart mutate, place bet. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 BullMQ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Render Redis): worker skeleton workers/settleWorker.ts. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Prisma –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –≤—ã–ø–ª–∞—Ç –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 Frontend: cart UI + localStorage adapter + server sync. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance
 - –ü–ª–∞–Ω –æ—Å—Ç–∞—ë—Ç—Å—è –≤ roadmap; —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ core API –∏ –æ—á–µ—Ä–µ–¥–µ–π.

##  –§–∞–∑–∞ 7 ‚Äî Admin panel + audit logging + RBAC (–≤–µ—Ç–∫–∞ features/admin)
–¶–µ–ª—å: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π, —Ä–æ–ª—å/–¥–æ—Å—Ç—É–ø.
 –ú–æ–¥–µ–ª—å AdminActionLog –∏ endpoint GET /api/admin/actions. ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Middleware RBAC (role checks) + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ (—ç–Ω–¥–ø–æ–∏–Ω—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–≤—è–∑–∫–∞ —Å RBAC –∏ –ª–æ–≥–≥–µ—Ä–æ–º)
 Frontend: lazy-loaded admin area (editor –º–∞—Ç—á–µ–π, –ª–æ–≥–∏). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ (—Å–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Vite-–ø—Ä–æ–µ–∫—Ç `admin/` —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –≤–∫–ª–∞–¥–æ–∫)

Acceptance
 - –ú–æ–¥–µ–ª—å –ª–æ–≥–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ Prisma —Å—Ö–µ–º–µ; endpoints –∏ UI ‚Äî –≤ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ.

##  –§–∞–∑–∞ 8 ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, CI/CD, –¥–µ–ø–ª–æ–π –Ω–∞ Render (–≤–µ—Ç–∫–∞ ci/infra)
–¶–µ–ª—å: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π CI, –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Render.
 Unit: Jest/ts-jest –¥–ª—è backend & frontend. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Integration: supertest –¥–ª—è Fastify endpoint‚Äô–æ–≤. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 E2E: Playwright (smoke —Ç–µ—Å—Ç—ã: place bet + receive update). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 CI (GitHub Actions): lint ‚Üí tsc ‚Üí test ‚Üí build. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä render.yaml / Render services setup (backend, frontend static site, worker service, cron/cron job –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π). ‚Äî –°—Ç–∞—Ç—É—Å: ‚úÖ ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥

 Secrets/ENV: –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (RENDER_DATABASE_URL, REDIS_URL, SENTRY_DSN, TELEGRAM_BOT_TOKEN –∏ —Ç.–¥.). ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥

Acceptance
 - `render.yaml` –∏ job –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –¥–æ–±–∞–≤–ª–µ–Ω—ã; CI workflow —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤.

##  –§–∞–∑–∞ 9 ‚Äî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞–ª–µ—Ä—Ç—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–≤–µ—Ç–∫–∞ hardening)
–¶–µ–ª—å: SLO/alerts, Sentry, Prometheus (metrics), –∑–∞—â–∏—Ç–∞.
 Sentry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è frontend + backend (errors + performance). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Prometheus / metrics endpoint /metrics (queue sizes, ws connections). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Health checks: /health –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å DB, Redis, BullMQ connectivity. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥

 Security hardening: rate limiting, input validation (zod), helmet, secure cookies, secret management –Ω–∞ Render. ‚Äî –°—Ç–∞—Ç—É—Å: üü® ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥

Acceptance
 - Health endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞–∑–æ–≤–æ; –¥–∞–ª—å–Ω–µ–π—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π ‚Äî —Å–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞.

##  –§–∞–∑–∞ 10 ‚Äî –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ–ª–∏—Ä–æ–≤–∫–∞, —Ä–µ–ª–∏–∑ (–≤–µ—Ç–∫–∞ release/v1)
–¶–µ–ª—å: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, final QA, —Ä–µ–ª–∏–∑.
 –í–∫–ª—é—á–∞—Ç—å tsconfig strict –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (–ø–æ –º–æ–¥—É–ª—é). ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Code splitting, lazy load admin, –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ
 Smoke tests –Ω–∞ staging, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–≤—ã–µ 48—á. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥
 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: migration notes, rollback steps, postmortem template. ‚Äî –°—Ç–∞—Ç—É—Å: ‚¨ú ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üîµ

Acceptance
 - Bundle size, latency, –æ—à–∏–±–∫–∏ –≤ Sentry –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø—Ä–∏–µ–º–ª–µ–º—ã—Ö –ø–æ—Ä–æ–≥–æ–≤; –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –≤ 48 —á–∞—Å–æ–≤.