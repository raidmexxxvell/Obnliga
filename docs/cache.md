# –ü–æ–ª–∏—Ç–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: –õ–∏–≥–∞ –û–±–Ω–∏–Ω—Å–∫–∞

## –°—Ö–µ–º–∞ –∫—ç—à-–∫–ª—é—á–µ–π

–í—Å–µ –∫—ç—à-–∫–ª—é—á–∏ —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É `–∫–∞—Ç–µ–≥–æ—Ä–∏—è:—Ç–∏–ø[:–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ_–ø–∞—Ä–∞–º–µ—Ç—Ä—ã]`

### 1. League (–õ–∏–≥–∞) ‚Äî TTL: 5-30 —Å–µ–∫
- `league:table` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –ª–∏–≥–∏ (5 —Å–µ–∫, SWR=15 —Å–µ–∫)
- `league:schedule` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç—á–µ–π (8 —Å–µ–∫)
- `league:stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–∏–≥–∏ (30 —Å–µ–∫)
- `league:results` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π (15 —Å–µ–∫)

### 2. Match Details (–î–µ—Ç–∞–ª–∏ –º–∞—Ç—á–µ–π) ‚Äî TTL: 10 –º–∏–Ω/—Ä–µ–∞–ª—Ç–∞–π–º
- `md:{match_id}` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –º–∞—Ç—á–∞ (10 –º–∏–Ω)
- `md:etag-temp:{match_id}` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ ETag –∑–∞–ø–∏—Å–∏
- `md:stats:{match_id}` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞—Ç—á–∞ (—Ä–µ–∞–ª—Ç–∞–π–º, SWR=5 —Å–µ–∫)

### 3. Predictions (–ü—Ä–æ–≥–Ω–æ–∑—ã) ‚Äî TTL: 2-5 –º–∏–Ω
- `predictions:list` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (5 –º–∏–Ω)
- `predictions:user:{user_id}` ‚Äî –ø—Ä–æ–≥–Ω–æ–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (2 –º–∏–Ω)

### 4. Leaderboard (–õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã) ‚Äî TTL: 1 –º–∏–Ω
- `lb:predictors` ‚Äî —Ç–æ–ø –ø—Ä–æ–≥–Ω–æ–∑–∏—Å—Ç–æ–≤ (1 –º–∏–Ω)
- `lb:rich` ‚Äî —Ç–æ–ø –±–æ–≥–∞—Ç—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ (1 –º–∏–Ω) 
- `lb:server` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ª–∏–¥–µ—Ä—ã (1 –º–∏–Ω)
- `lb:prizes` ‚Äî –ø—Ä–∏–∑—ã –∏ –Ω–∞–≥—Ä–∞–¥—ã (30 —Å–µ–∫)

### 5. Achievements (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è) ‚Äî TTL: 30 –º–∏–Ω
- `achievements:v1` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (30 –º–∏–Ω)

### 6. Ads & Features (–†–µ–∫–ª–∞–º–∞/–§–∏—á–∏) ‚Äî TTL: 5-15 –º–∏–Ω
- `ads:topmatch` ‚Äî —Ç–æ–ø –º–∞—Ç—á –¥–ª—è —Ä–µ–∫–ª–∞–º—ã (15 –º–∏–Ω)

### 7. Database API ‚Äî TTL: varies
- `GET:{endpoint}` ‚Äî –æ–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω

###	8.–ó–∞—â–∏—Ç–∞ –æ—Ç –∫—ç—à-–±–æ–º–±
-	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
	MAX_CACHE_ENTRIES_PER_USER = 50
-	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –æ–¥–Ω–æ–º—É –∫–ª—é—á—É:
	RATE_LIMIT_PER_KEY = "10/–º–∏–Ω"
-	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞:
	LRU (Least Recently Used) —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏

### Automatic (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)
- –ü–æ TTL —Å—Ä–æ–∫–∞ –¥–∞–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 304 Not Modified ‚Äî –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∫—ç—à–∞

### Event-driven (–ü–æ —Å–æ–±—ã—Ç–∏—è–º)
- WS —Å–æ–±—ã—Ç–∏—è `data_patch` ‚Üí –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π
- `match_results_update` ‚Üí `league:table`, `league:stats`
- `schedule_update` ‚Üí `league:schedule`
- `odds_update` ‚Üí `predictions:*`

###	üîÅ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
-	Automatic
    –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ TTL
    –ü—Ä–∏ 304 Not Modified ‚Äî –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TTL
-	Event-driven (—á–µ—Ä–µ–∑ WebSocket)
    data_patch ‚Üí –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
    match_results_update ‚Üí league:table, league:stats
    schedule_update ‚Üí league:schedule
    odds_update ‚Üí predictions:*

## TTL –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ (—Ä–µ–∞–ª—Ç–∞–π–º) ‚Äî 5-30 —Å–µ–∫
- –°—á–µ—Ç –º–∞—Ç—á–µ–π, —Ç–∞–±–ª–∏—Ü–∞ –ª–∏–≥–∏, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã

### –í–∞–∂–Ω—ã–µ (—á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) ‚Äî 1-5 –º–∏–Ω
- –ü—Ä–æ–≥–Ω–æ–∑—ã, –ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°—Ç–∞–±–∏–ª—å–Ω—ã–µ (—Ä–µ–¥–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) ‚Äî 10-30 –º–∏–Ω
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –ü—Ä–∞–≤–∏–ª–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### ETag-based
- –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ETag –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `If-None-Match`
- 304 ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à, –æ–±–Ω–æ–≤–∏—Ç—å TTL

### Version-based (–¥–ª—è WS –ø–∞—Ç—á–µ–π)
- ETag-based: –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- Version-based: –¥–ª—è WS-–ø–∞—Ç—á–µ–π (version > current)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –≤ debug —Ä–µ–∂–∏–º–µ
- Cache hit/miss ratio –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ß–∞—Å—Ç–æ—Ç–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –†–∞–∑–º–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º

### Development
- –ö–æ—Ä–æ—Ç–∫–∏–µ TTL –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à-–æ–ø–µ—Ä–∞—Ü–∏–π

### Production
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ TTL –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –Ω–∞–≥—Ä—É–∑–∫–∏/—Å–≤–µ–∂–µ—Å—Ç–∏
- –û—à–∏–±–∫–∏ –∫—ç—à–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI